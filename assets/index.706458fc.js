import{E as e,a as t,r as i,o as a,c as r,w as l,b as s,d as n,e as o,t as d,f as p,g as c,F as g,h as m,i as u,j as f,k as h}from"./vendor.26e6e2c5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var L;const y={data:()=>({windowHeight:0,searchTextLeft:"",searchTextRight:"",itemList:[],filtersItemList:[],TempItemList:[],TempFiltersItemList:[],updateItemListTime:"",filters:[{text:"弹药",value:"ammo"},{text:"盒装弹药",value:"ammoBox"},{text:"护甲",value:"armor"},{text:"装甲板",value:"armorPlate"},{text:"背包",value:"backpack"},{text:"以货换货",value:"barter"},{text:"容器",value:"container"},{text:"眼镜",value:"glasses"},{text:"手雷",value:"grenade"},{text:"武器主体",value:"gun"},{text:"耳机",value:"headphones"},{text:"头盔",value:"helmet"},{text:"注射器",value:"injectors"},{text:"钥匙",value:"keys"},{text:"标记物品",value:"markedOnly"},{text:"医疗物品",value:"meds"},{text:"枪械模组",value:"mods"},{text:"无法上架跳蚤物品",value:"noFlea"},{text:"握把",value:"pistolGrip"},{text:"武器",value:"preset"},{text:"食物",value:"provisions"},{text:"弹挂",value:"rig"},{text:"消音器",value:"suppressor"},{text:"衣服",value:"wearable"}],tagType:["#409eff","#67c23a","#909399","#f56c6c","#e6a23c","#409eff","#67c23a","#909399","#f56c6c","#e6a23c"],pagination_left:{currentPage:1,total:20,pageSize:20},pagination_right:{currentPage:1,total:20,pageSize:20}}),created(){(L=this).init()},mounted(){L.windowHeight=window.innerHeight},methods:{goToWiki(e){window.open(e)},switchChange(e){L.TempFiltersItemList.forEach((t=>{t.id==e.id&&(t.isDistanceFilters=e.isDistanceFilters)}))},handleFile(e){const t=e.target.files[0];t&&"application/json"===t.type?this.readJsonData(t):console.log("只能选择 JSON 格式的文件")},readJsonData(e){const t=new FileReader;t.onload=()=>{try{const i=JSON.parse(t.result);console.log(i),L.TempFiltersItemList=JSON.parse(JSON.stringify(i)),L.filtersItemList=JSON.parse(JSON.stringify(i));const a=localStorage.getItem("itemList");if(null!=a&&""!=a){L.itemList=JSON.parse(a).data.items,L.TempItemList=JSON.parse(JSON.stringify(L.itemList));for(var e=0;e<L.filtersItemList.length;e++){const t=L.TempItemList.findIndex((t=>t.id==L.filtersItemList[e].id));L.TempItemList.splice(t,1)}L.itemList=JSON.parse(JSON.stringify(L.TempItemList)),L.resetPage(!0)}else alert("无缓存数据请更新")}catch(i){alert("无效的 JSON 文件")}},t.readAsText(e)},save(){e.prompt("请输入文件名","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputPattern:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,inputErrorMessage:"只能只含有汉字、数字、字母、下划线"}).then((({value:e})=>{L.TempFiltersItemList.forEach((e=>{e.isDistanceFilters||(e.isDistanceFilters=!1)})),L.downLoadJson(L.TempFiltersItemList,e)}))},resetPage(e){e?L.pagination_left.currentPage=1:L.pagination_right.currentPage=1},search(e){if(e){let e=[];if(""==L.searchTextLeft||null==L.searchTextLeft)return void(L.itemList=JSON.parse(JSON.stringify(L.TempItemList)));L.TempItemList.forEach((t=>{-1!=t.name.toLowerCase().indexOf(L.searchTextLeft.toLowerCase())&&e.push(t)})),L.itemList=e,L.resetPage(!0)}else{let e=[];if(""==L.searchTextLeft||null==L.searchTextLeft)return void(L.filtersItemList=JSON.parse(JSON.stringify(L.TempFiltersItemList)));L.TempFiltersItemList.forEach((t=>{-1!=t.name.toLowerCase().indexOf(L.searchTextRight.toLowerCase())&&e.push(t)})),L.filterList=e,L.resetPage(!1)}},add(){const e=this.$refs.leftTable.getSelectionRows();L.TempFiltersItemList=L.TempFiltersItemList.concat(e),L.filtersItemList=JSON.parse(JSON.stringify(L.TempFiltersItemList));for(var t=0;t<e.length;t++){const i=L.TempItemList.findIndex((i=>i.id==e[t].id));L.TempItemList.splice(i,1)}L.itemList=JSON.parse(JSON.stringify(L.TempItemList)),L.resetPage(!1)},removeSelect(){const e=this.$refs.rightTable.getSelectionRows();L.TempItemList=L.TempItemList.concat(e),L.itemList=JSON.parse(JSON.stringify(L.TempItemList));for(var t=0;t<e.length;t++){const i=L.TempFiltersItemList.findIndex((i=>i.id==e[t].id));L.TempFiltersItemList.splice(i,1)}L.filtersItemList=JSON.parse(JSON.stringify(L.TempFiltersItemList)),L.resetPage(!0)},removeAll(){L.itemList=L.itemList.concat(L.filtersItemList),L.filtersItemList=[],L.resetPage(!0)},rowClickLeft(e,t,i){this.$refs.leftTable.toggleRowSelection(e)},rowClickRight(e,t,i){this.$refs.rightTable.toggleRowSelection(e)},getTypeName(e){for(var t=0;t<L.filters.length;t++)if(L.filters[t].value==e)return L.filters[t].text},canFind(e,t){let i=!1;if(0==e.length)return!0;for(var a=0;a<e.length;a++){for(var r=0;r<t.length;r++)if(e[a]===t[r]){i=!0;break}if(i)break}return i},filterHandler(e){const t=[],i=[];for(let a in e)e[a].forEach((e=>{i.push(e)}));i.length>0?(L.TempItemList.forEach((e=>{L.canFind(e.types,i)&&t.push(e)})),L.itemList=t):L.itemList=JSON.parse(JSON.stringify(L.TempItemList)),L.resetPage(!0)},filterHandlerRight(e){const t=[],i=[];for(let a in e)e[a].forEach((e=>{i.push(e)}));i.length>0?(L.TempFiltersItemList.forEach((e=>{L.canFind(e.types,i)&&t.push(e)})),L.filtersItemList=t):L.filtersItemList=JSON.parse(JSON.stringify(L.TempFiltersItemList)),L.resetPage(!0)},sortChangeLeft(e){"usedInTasks"==e.prop?"ascending"==e.order?this.itemList.sort(((e,t)=>e.usedInTasks.length-t.usedInTasks.length)):"descending"==e.order&&this.itemList.sort(((e,t)=>t.usedInTasks.length-e.usedInTasks.length)):"ascending"==e.order?this.itemList.sort(((t,i)=>t[e.prop]-i[e.prop])):"descending"==e.order&&this.itemList.sort(((t,i)=>i[e.prop]-t[e.prop])),L.resetPage(!0)},sortChangeRight(e){"usedInTasks"==e.prop?"ascending"==e.order?this.filtersItemList.sort(((e,t)=>e.usedInTasks.length-t.usedInTasks.length)):"descending"==e.order&&this.filtersItemList.sort(((e,t)=>t.usedInTasks.length-e.usedInTasks.length)):"ascending"==e.order?this.filtersItemList.sort(((t,i)=>t[e.prop]-i[e.prop])):"descending"==e.order&&this.filtersItemList.sort(((t,i)=>i[e.prop]-t[e.prop])),L.resetPage(!0)},handleSizeChangeLeft(e){this.pagination_left.currentPage=1,this.pagination_left.pageSize=e},handleCurrentChangeLeft(e){this.pagination_left.currentPage=e},handleSizeChangeRight(e){this.pagination_right.currentPage=1,this.pagination_right.pageSize=e},handleCurrentChangeRight(e){this.pagination_right.currentPage=e},init(){const e=localStorage.getItem("itemList");null!=e&&""!=e?(L.itemList=JSON.parse(e).data.items,L.TempItemList=JSON.parse(JSON.stringify(L.itemList)),L.updateItemListTime=localStorage.getItem("updateItemListTime"),this.pagination_left.total=L.itemList.length,L.resetPage(!0)):L.updateItemList()},downLoadItemList(){L.downLoadJson(JSON.parse(localStorage.getItem("itemList")),"item")},downLoadJson(e,t){var i=JSON.stringify(e);let a="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(i),r=document.createElement("a");r.href=a,r.download=t+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r)},showLoding:e=>t.service({lock:!0,text:e,background:"rgba(0, 0, 0, 0.7)"}),updateItemList(){const e=L.showLoding("数据更新中(若长时间无法加载请挂梯子)...");this.$http.post("https://api.tarkov.dev/",{query:"{\n  items(lang: zh) {\n    id\n    name\n    normalizedName\n    shortName\n    avg24hPrice\n    basePrice\n    iconLink\n\twikiLink\n    types\n    usedInTasks {\n      name\n    }\n  }\n}"}).then((t=>{localStorage.setItem("itemList",JSON.stringify(t.data)),localStorage.setItem("updateItemListTime",L.$moment().format("YYYY-MM-DD HH:mm:ss")),e.close(),window.location.reload()})).catch((t=>{console.error(t),e.close()}))},toFixed(e){let t=parseFloat(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}),i=t.split(".");return i[1]>0?t:i[0]}}},I={class:"common-layout"},w={style:{width:"100%","text-align":"left","margin-bottom":"20px"}},k=o("下载原始数据"),T=o("搜索"),x=o(" 查看关联任务"),C=o(" 否"),v={style:{display:"flex","flex-wrap":"wrap","flex-direction":"row","align-items":"center","justify-items":"center",width:"100%",height:"100%"}},S={style:{width:"100%"}},_={style:{width:"100%"}},b=o("添加"+d("->")),F={style:{width:"100%","margin-top":"20px"}},N=o("移除"+d("<-")),P={class:"common-layout "},J={style:{width:"100%","text-align":"right","margin-bottom":"20px"}},O=o(" 加载过滤器"),z=o("保存"),R=o("搜索"),D=o(" 查看关联任务"),E=o(" 否");y.render=function(e,t,m,u,f,h){const L=i("el-button"),y=i("el-header"),V=i("el-table-column"),H=i("el-image"),$=i("el-input"),j=i("el-link"),U=i("el-tag"),A=i("el-tooltip"),M=i("el-table"),Y=i("el-main"),B=i("el-pagination"),W=i("el-footer"),q=i("el-container"),K=i("el-col"),G=i("el-switch"),Z=i("el-row");return a(),r(Z,null,{default:l((()=>[s(K,{span:11},{default:l((()=>[n("div",I,[s(q,null,{default:l((()=>[s(y,{style:{"--el-header-height":"40px"}},{default:l((()=>[n("div",w,[s(L,{type:"primary",onClick:h.updateItemList},{default:l((()=>[o("更新数据(上次更新时间："+d(f.updateItemListTime)+")",1)])),_:1},8,["onClick"]),s(L,{type:"primary",onClick:h.downLoadItemList},{default:l((()=>[k])),_:1},8,["onClick"])])])),_:1}),s(Y,null,{default:l((()=>[s(M,{height:880,style:{width:"100%"},ref:"leftTable",stripe:"",data:f.itemList.slice((f.pagination_left.currentPage-1)*f.pagination_left.pageSize,f.pagination_left.currentPage*f.pagination_left.pageSize),onSortChange:h.sortChangeLeft,onFilterChange:h.filterHandler,onRowClick:h.rowClickLeft},{default:l((()=>[s(V,{type:"selection",width:"30"}),s(V,{property:"iconLink",label:"图片",width:"60"},{default:l((e=>[s(H,{loading:"lazy",lazy:"true",src:e.row.iconLink},null,8,["src"])])),_:1}),s(V,{property:"name",label:"名称"},{header:l((()=>[n("div",null,[s($,{modelValue:f.searchTextLeft,"onUpdate:modelValue":t[0]||(t[0]=e=>f.searchTextLeft=e),size:"small",placeholder:"名称搜索",clearable:"",style:{width:"60%","margin-right":"10px"}},null,8,["modelValue"]),s(L,{size:"small",onClick:t[1]||(t[1]=e=>h.search(!0))},{default:l((()=>[T])),_:1})])])),default:l((e=>[s(j,{type:"primary",onClick:t=>h.goToWiki(e.row.wikiLink)},{default:l((()=>[o(d(e.row.name),1)])),_:2},1032,["onClick"])])),_:1}),s(V,{property:"avg24hPrice",label:"跳蚤均价",sortable:""},{default:l((e=>[o(d(h.toFixed(e.row.avg24hPrice)),1)])),_:1}),s(V,{property:"basePrice",label:"基础价格",sortable:""},{default:l((e=>[o(d(h.toFixed(e.row.basePrice)),1)])),_:1}),s(V,{property:"types",label:"类型",filters:f.filters,"filter-placement":"bottom-end"},{default:l((e=>[(a(!0),p(g,null,c(e.row.types,((e,t)=>(a(),r(U,{key:e,type:e,color:f.tagType[t],effect:"dark",style:{"margin-right":"10px"}},{default:l((()=>[o(d(h.getTypeName(e)),1)])),_:2},1032,["type","color"])))),128))])),_:1},8,["filters"]),s(V,{property:"usedInTasks",label:"关联任务",sortable:""},{default:l((e=>[e.row.usedInTasks.length>0?(a(),r(A,{key:0,class:"box-item",effect:"dark",placement:"bottom"},{content:l((()=>[(a(!0),p(g,null,c(e.row.usedInTasks,((e,t)=>(a(),p("div",null,[n("div",null,d(e.name),1)])))),256))])),default:l((()=>[s(U,{type:"success",effect:"dark"},{default:l((()=>[x])),_:1})])),_:2},1024)):(a(),r(U,{key:1,type:"danger",effect:"dark"},{default:l((()=>[C])),_:1}))])),_:1})])),_:1},8,["data","onSortChange","onFilterChange","onRowClick"])])),_:1}),s(W,{style:{"--el-footer-height":"0px"}},{default:l((()=>[s(B,{align:"center",onSizeChange:h.handleSizeChangeLeft,small:"",onCurrentChange:h.handleCurrentChangeLeft,"current-page":f.pagination_left.currentPage,"page-sizes":[20,50,100,200],"page-size":f.pagination_left.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:f.itemList.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),_:1})])),_:1})])])),_:1}),s(K,{span:1},{default:l((()=>[n("div",v,[n("div",S,[n("div",_,[s(L,{type:"success",round:"",onClick:h.add},{default:l((()=>[b])),_:1},8,["onClick"])]),n("div",F,[s(L,{type:"warning",round:"",onClick:h.removeSelect},{default:l((()=>[N])),_:1},8,["onClick"])])])])])),_:1}),s(K,{span:11},{default:l((()=>[n("div",P,[s(q,null,{default:l((()=>[s(y,{style:{"--el-header-height":"40px"}},{default:l((()=>[n("div",J,[O,n("input",{type:"file",onChange:t[2]||(t[2]=(...e)=>h.handleFile&&h.handleFile(...e))},null,32),s(L,{type:"primary",onClick:h.save},{default:l((()=>[z])),_:1},8,["onClick"])])])),_:1}),s(Y,null,{default:l((()=>[s(M,{height:880,style:{width:"100%"},ref:"rightTable",stripe:"",data:f.filtersItemList.slice((f.pagination_right.currentPage-1)*f.pagination_right.pageSize,f.pagination_right.currentPage*f.pagination_right.pageSize),onSortChange:h.sortChangeRight,onFilterChange:h.filterHandlerRight,onRowClick:h.rowClickRight},{default:l((()=>[s(V,{type:"selection",width:"30",selectable:e=>!e.isSelected},null,8,["selectable"]),s(V,{property:"iconLink",label:"图片",width:"60"},{default:l((e=>[s(H,{loading:"lazy",lazy:"true",src:e.row.iconLink},null,8,["src"])])),_:1}),s(V,{property:"name",label:"名称",width:"180"},{header:l((()=>[n("div",null,[s($,{modelValue:f.searchTextRight,"onUpdate:modelValue":t[3]||(t[3]=e=>f.searchTextRight=e),size:"small",placeholder:"名称搜索",clearable:"",style:{width:"60%","margin-right":"10px"}},null,8,["modelValue"]),s(L,{size:"small",onClick:t[4]||(t[4]=e=>h.search(!0))},{default:l((()=>[R])),_:1})])])),default:l((e=>[s(j,{type:"primary",onClick:t=>h.goToWiki(e.row.wikiLink)},{default:l((()=>[o(d(e.row.name),1)])),_:2},1032,["onClick"])])),_:1}),s(V,{property:"avg24hPrice",label:"跳蚤均价",sortable:""},{default:l((e=>[o(d(h.toFixed(e.row.avg24hPrice)),1)])),_:1}),s(V,{property:"basePrice",label:"基础价格",sortable:""},{default:l((e=>[o(d(h.toFixed(e.row.basePrice)),1)])),_:1}),s(V,{property:"types",label:"类型",filters:f.filters,"filter-placement":"bottom-end"},{default:l((e=>[(a(!0),p(g,null,c(e.row.types,((e,t)=>(a(),r(U,{key:e,type:e,color:f.tagType[t],effect:"dark",style:{"margin-right":"10px"}},{default:l((()=>[o(d(h.getTypeName(e)),1)])),_:2},1032,["type","color"])))),128))])),_:1},8,["filters"]),s(V,{property:"usedInTasks",label:"关联任务",sortable:""},{default:l((e=>[e.row.usedInTasks.length>0?(a(),r(A,{key:0,class:"box-item",effect:"dark",placement:"bottom"},{content:l((()=>[(a(!0),p(g,null,c(e.row.usedInTasks,((e,t)=>(a(),p("div",null,[n("div",null,d(e.name),1)])))),256))])),default:l((()=>[s(U,{type:"success",effect:"dark"},{default:l((()=>[D])),_:1})])),_:2},1024)):(a(),r(U,{key:1,type:"danger",effect:"dark"},{default:l((()=>[E])),_:1}))])),_:1}),s(V,{property:"usedInTasks",label:"不受距离限制"},{default:l((e=>[s(G,{modelValue:e.row.isDistanceFilters,"onUpdate:modelValue":t=>e.row.isDistanceFilters=t,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},onChange:t=>h.switchChange(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1})])),_:1},8,["data","onSortChange","onFilterChange","onRowClick"])])),_:1}),s(W,{style:{"--el-footer-height":"0px"}},{default:l((()=>[s(B,{align:"center",onSizeChange:h.handleSizeChangeRight,small:"",onCurrentChange:h.handleCurrentChangeRight,"current-page":f.pagination_right.currentPage,"page-sizes":[20,50,100,200],"page-size":f.pagination_right.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:f.filtersItemList.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),_:1})])),_:1})])])),_:1})])),_:1})};const V=m({setup:e=>(e,t)=>(a(),r(y))});V.config.globalProperties.$http=u,V.config.globalProperties.$moment=f,V.use(h),V.mount("#app");
